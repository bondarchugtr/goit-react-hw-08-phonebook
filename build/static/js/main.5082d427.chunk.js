(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{18:function(e,t,n){e.exports={nav__menu__container:"NavMenu_nav__menu__container__2dcSh",nav__menu__item:"NavMenu_nav__menu__item__1gj7Q",nav__menu__text__dec:"NavMenu_nav__menu__text__dec__1GLYT"}},22:function(e,t,n){e.exports={Contacts__title:"PhoneBook_Contacts__title__1soz4",Filter__text:"PhoneBook_Filter__text__2PMSn"}},26:function(e,t,n){e.exports={Contact__list:"PhoneBook_Contact__list__3DUaL",Contact__item:"PhoneBook_Contact__item__3W06b",Button__remove:"PhoneBook_Button__remove__1xPta"}},29:function(e,t,n){e.exports={Filter__search:"Filter_Filter__search__1oJmY",Filter__input:"Filter_Filter__input__1FUZG"}},39:function(e,t,n){e.exports={UserMenu:"UserMenu_UserMenu__1eynt"}},4:function(e,t,n){e.exports={Forma:"InputPhonebook_Forma__mMyPT",Forma__input:"InputPhonebook_Forma__input__1AjOE",nameinput:"InputPhonebook_nameinput__2MBVh",Button__form:"InputPhonebook_Button__form__yveQA"}},40:function(e,t,n){e.exports={container:"global_container__1GSA-"}},49:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),s=n.n(c),u=n(15),o=(n(49),n(2)),i=n(3),l=n(18),j=n.n(l),b=n(7),d=n(5),m=Object(d.b)("contacts/addFilter"),_=n(10),p=n.n(_),O=n(16),f=n(13),h=n.n(f);h.a.defaults.baseURL="https://connections-api.herokuapp.com";var x=Object(d.c)("contacts/fetchContacts",Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/contacts");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))),v=Object(d.c)("contacts/addContacts",function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:t.name,number:t.number},e.prev=1,e.next=4,h.a.post("/contacts",n);case 4:return a=e.sent,r=a.data,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()),g=Object(d.c)("contacts/deleteContact",function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.delete("/contacts/".concat(t));case 3:return e.abrupt("return",t);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),k=n(19),N=function(e){return e.contacts.items},C=function(e){return e.contacts.filter},y=(Object(k.a)([N,C],(function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))})),n(4)),w=n.n(y),F=n(14),I=n(1),L=function(e){var t=e.onSubmit,n=Object(a.useState)(""),r=Object(i.a)(n,2),c=r[0],s=r[1],u=Object(a.useState)(""),o=Object(i.a)(u,2),l=o[0],j=o[1],b=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":s(a);break;case"number":j(a);break;default:return}},d=function(){s(""),j("")};return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({name:c,number:l}),d()},className:w.a.Forma,children:[Object(I.jsx)("label",{className:w.a.nameinput}),"Name",Object(I.jsx)("input",{className:w.a.Forma__input,id:Object(F.a)(),type:"text",name:"name",value:c,placeholder:"Ivan Petrov",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,onChange:b}),Object(I.jsx)("label",{className:w.a.nameinput}),"Number",Object(I.jsx)("input",{className:w.a.Forma__input,id:Object(F.a)(),type:"text",name:"number",value:l,placeholder:"+380990000000",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,onChange:b}),Object(I.jsx)("button",{type:"submit",className:w.a.Button__form,children:"Add Contact"})]})})},S=n(26),B=n.n(S),P=function(e){var t=e.contacts,n=void 0===t?[]:t,a=e.delContact,r=e.isLogin;return Object(I.jsx)(I.Fragment,{children:!r&&Object(I.jsx)("ul",{className:B.a.Contact__list,children:n.map((function(e){return Object(I.jsxs)("li",{className:B.a.Contact__item,children:[Object(I.jsxs)("span",{children:[e.name," : ",e.number]}),Object(I.jsx)("button",{type:"button",onClick:function(){return a(e.id)},className:B.a.Button__remove,children:"Remove"})]},e.id)}))})})},A=n(29),U=n.n(A),M=function(e){var t=e.filterContact,n=e.value;return Object(I.jsx)("div",{children:Object(I.jsxs)("form",{className:U.a.Filter__search,children:[Object(I.jsx)("label",{children:"Search"}),Object(I.jsx)("input",{className:U.a.Filter__input,value:n,onChange:t,placeholder:"Enter your name"})]})})},z=n(22),q=n.n(z);var E=function(){var e=Object(b.c)(N),t=Object(b.c)(C),n=Object(b.b)();Object(a.useEffect)((function(){x&&n(x())}),[n]);var r=function(t){return e.find((function(e){return e.name===t}))},c=t.toLowerCase(),s=e.filter((function(e){return e.name.toLowerCase().includes(c)}));return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:q.a.PhoneBookBlock,children:Object(I.jsx)(L,{onSubmit:function(e){var t={name:e.name,number:e.number};if(r(t.name))return console.log(t.name),alert("Name ".concat(t.name,"already on your list\n      "));n(v(t))}})}),Object(I.jsxs)("div",{children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("h2",{className:q.a.Contacts__title,children:"Contacts"}),e.length>0?Object(I.jsx)(M,{filterContact:function(e){var t=e.currentTarget.value;n(m(t))},value:t}):Object(I.jsx)("p",{className:q.a.Filter__text,children:"No contacts\ud83d\ude41"})]}),Object(I.jsx)(P,{contacts:s,delContact:function(e){n(g(e))}})]})]})},R={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUsername:function(e){return e.auth.user.name}};h.a.defaults.baseURL="https://connections-api.herokuapp.com";var D=function(e){h.a.defaults.headers.common.Authorization="Bearer ".concat(e)},G=function(){h.a.defaults.headers.common.Authorization=""},J=Object(d.c)("auth/register",function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/users/signup",t);case 3:return n=e.sent,a=n.data,D(a.token),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),T=Object(d.c)("auth/login",function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/users/login",t);case 3:return n=e.sent,a=n.data,D(a.token),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),Z={register:J,logOut:Object(d.c)("auth/logout",Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/users/logout");case 3:G(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))),logIn:T,fetchCurrentUser:Object(d.c)("auth/refresh",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var a,r,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState(),null!==(r=a.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return D(r),e.prev=5,e.next=8,h.a.get("/users/current");case 8:return c=e.sent,s=c.data,e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(5);case 15:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},Q=n(39),V=n.n(Q);var W=function(){var e=Object(b.c)(R.getUsername),t=Object(b.b)();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:V.a.UserMenu,children:[Object(I.jsx)("div",{children:Object(I.jsxs)("span",{children:["Hello,",e]})}),Object(I.jsx)("button",{type:"button",onClick:function(){return t(Z.logOut())},children:"Logout"})]}),Object(I.jsx)("div",{children:Object(I.jsx)(E,{})})]})};function Y(){var e=Object(b.c)(R.getIsLoggedIn),t=Object(a.useState)(!0),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),l=Object(i.a)(s,2),d=l[0],m=l[1];return Object(I.jsxs)("header",{children:[Object(I.jsx)("nav",{children:e?Object(I.jsx)(W,{}):Object(I.jsx)("div",{children:Object(I.jsxs)("ul",{className:j.a.nav__menu__container,children:[Object(I.jsx)("li",{className:j.a.nav__menu__item,children:Object(I.jsx)(u.b,{to:"/",className:r?j.a.nav__menu__text__dec:j.a.nav__menu__text,onClick:function(){c(!0),m(!1)},children:"Authorization"})}),Object(I.jsx)("li",{className:j.a.nav__menu__item,children:Object(I.jsx)(u.b,{to:"/register",className:d?j.a.nav__menu__text__dec:j.a.nav__menu__text,onClick:function(){c(!1),m(!0)},children:"Register"})})]})})}),Object(I.jsx)(o.a,{})]})}function H(){return Object(I.jsxs)("div",{children:[Object(I.jsx)("h1",{children:"Nothing to see here!"}),Object(I.jsx)("p",{children:Object(I.jsx)(u.b,{to:"/",children:"Go to the home page"})})]})}var $=function(){var e=Object(b.b)(),t=Object(a.useState)(""),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),u=Object(i.a)(s,2),o=u[0],l=u[1],j=Object(b.c)(R.getIsLoggedIn),d=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":return c(a);case"password":return l(a);default:return}},m=function(){c(""),l("")};return Object(I.jsx)("div",{className:"",children:!j&&Object(I.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(Z.logIn({email:r,password:o})),m()},className:w.a.Forma,children:[Object(I.jsx)("label",{}),Object(I.jsx)("span",{children:"login"}),Object(I.jsx)("input",{className:w.a.Forma__input,id:Object(F.a)(),type:"text",name:"email",value:r,required:!0,onChange:d}),Object(I.jsx)("label",{}),Object(I.jsx)("span",{children:"Password"}),Object(I.jsx)("input",{className:w.a.Forma__input,id:Object(F.a)(),type:"text",name:"password",value:o,required:!0,onChange:d}),Object(I.jsx)("button",{type:"submit",className:w.a.Button__form,children:"Login"})]})})},K=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),u=s[0],o=s[1],l=Object(a.useState)(""),j=Object(i.a)(l,2),d=j[0],m=j[1],_=Object(b.b)(),p=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":return r(a);case"email":return m(a);case"password":return o(a);default:return}},O=function(){r(""),o(""),m("")};return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("form",{onSubmit:function(e){e.preventDefault(),_(Z.register({name:n,email:d,password:u})),O()},className:w.a.Forma,children:[Object(I.jsx)("label",{className:w.a.nameinput}),Object(I.jsx)("span",{children:"login"}),Object(I.jsx)("input",{className:w.a.Forma__input,id:Object(F.a)(),type:"text",name:"name",value:n,required:!0,onChange:p}),Object(I.jsx)("label",{className:w.a.nameinput}),Object(I.jsx)("span",{children:"Password"}),Object(I.jsx)("input",{className:w.a.Forma__input,id:Object(F.a)(),type:"text",name:"password",value:u,required:!0,onChange:p}),Object(I.jsx)("label",{}),Object(I.jsx)("span",{children:"Email"}),Object(I.jsx)("input",{className:w.a.Forma__input,id:Object(F.a)(),type:"text",name:"email",value:d,required:!0,onChange:p}),Object(I.jsx)("button",{type:"submit",className:w.a.Button__form,children:"Registry"})]})})},X=n(40),ee=n.n(X);var te,ne,ae,re=function(){var e=Object(b.b)();return Object(a.useEffect)((function(){e(Z.fetchCurrentUser())}),[e]),Object(I.jsx)("div",{className:ee.a.container,children:Object(I.jsx)(o.d,{children:Object(I.jsxs)(o.b,{path:"/",element:Object(I.jsx)(Y,{}),children:[Object(I.jsx)(o.b,{index:!0,element:Object(I.jsx)($,{})}),Object(I.jsx)(o.b,{path:"/register",element:Object(I.jsx)(K,{})}),Object(I.jsx)(o.b,{path:"*",element:Object(I.jsx)(H,{})})]})})})},ce=(n(76),n(41)),se=n(6),ue=n(44),oe=n(8),ie=Object(d.d)([],(te={},Object(se.a)(te,x.fulfilled,(function(e,t){return t.payload})),Object(se.a)(te,v.fulfilled,(function(e,t){return[].concat(Object(ue.a)(e),[t.payload])})),Object(se.a)(te,g.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),te)),le=Object(d.d)(!1,(ne={},Object(se.a)(ne,x.pending,(function(){return!0})),Object(se.a)(ne,v.fulfilled,(function(){return!1})),Object(se.a)(ne,v.rejected,(function(){return!1})),Object(se.a)(ne,g.pending,(function(){return!0})),Object(se.a)(ne,g.fulfilled,(function(){return!1})),Object(se.a)(ne,g.rejected,(function(){return!1})),Object(se.a)(ne,x.pending,(function(){return!0})),Object(se.a)(ne,x.fulfilled,(function(){return!1})),Object(se.a)(ne,x.rejected,(function(){return!1})),ne)),je=Object(d.d)("",Object(se.a)({},m,(function(e,t){return t.payload}))),be=Object(oe.b)({items:ie,filter:je,loading:le}),de=n(42),me=n.n(de),_e=Object(d.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(ae={},Object(se.a)(ae,Z.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(se.a)(ae,Z.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(se.a)(ae,Z.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(se.a)(ae,Z.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0})),ae)}).reducer,pe=n(17),Oe=Object(ce.createLogger)(),fe={serializableCheck:{ignoredActions:[pe.a,pe.f,pe.b,pe.c,pe.d,pe.e]},logger:Oe},he={key:"auth",storage:me.a,whitelist:["token"]},xe=Object(d.a)({reducer:{auth:Object(pe.g)(he,_e),contacts:be},middleware:function(e){return e(fe)},devTools:!1}),ve=Object(pe.h)(xe),ge=n(43);s.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(b.a,{store:xe,children:Object(I.jsx)(ge.a,{loading:null,persistor:ve,children:Object(I.jsx)(u.a,{children:Object(I.jsx)(re,{})})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.5082d427.chunk.js.map